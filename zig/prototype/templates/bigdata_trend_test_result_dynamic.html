{% extends "bigdata_base.html" %}
{% load staticfiles %}

{% block content %}
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="page-header">
                <h1>量化<small>趋势指标回测结果</small></h1>
            </div>

            <div>股票名称:            测试股票1</div>
            <div class="col-md-3 alert alert-dismissible fade in" id="testTemplate" role="alert">
                <div class="panel panel-default">
                    <!-- Default panel contents -->
                    <div class="panel-heading">回测1</div>
                    <!-- List group -->
                    <ul class="list-group">
                        <li class="list-group-item"><span class="label label-success">买入</span><span class="buy">五日上穿十日</span></li>
                        <li class="list-group-item"><span class="label label-danger">卖出</span><span class="sell">五日下穿十日</span></li>
                    </ul>
                </div>
            </div>
            <div class="col-md-12">
                五日,十日均线
                <div id="digram_5_10"></div>
                表现
                <a href="{% static 'img/performance_5_10.png' %}" class="thumbnail">
                    <img src="{% static 'img/performance_5_10_small.png' %}" />
                </a>
            </div>
            <div class="col-md-3 alert alert-dismissible fade in" role="alert">
                <div class="panel panel-default">
                    <!-- Default panel contents -->
                    <div class="panel-heading">回测2</div>
                    <!-- List group -->
                    <ul class="list-group">
                        <li class="list-group-item"><span class="label label-success">买入</span><span class="buy">五日上穿五十日</span></li>
                        <li class="list-group-item"><span class="label label-danger">卖出</span><span class="sell">五日下穿五十日</span></li>
                    </ul>
                </div>
            </div>

            <div class="col-md-12">
                五日,五十日均线
                <a href="{% static 'img/mav_5_50.png' %}" class="thumbnail">
                    <img src="{% static 'img/mav_5_50_small.png' %}" />
                </a>
                表现
                <a href="{% static 'img/performance_5_50.png' %}" class="thumbnail">
                    <img src="{% static 'img/performance_5_50_small.png' %}" />
                </a>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="http://cdn.hcharts.cn/highstock/highstock.js"></script>
    <script src="{% static 'js/strategyCharts.js' %}" ></script>

    <script type="text/javascript">
        var categories = {{categories|safe}};
        var vals = {{vals|safe}};
        var avg_5_10 = {{ avg_5_10|safe }};
        var avg_5 = [];
        var avg_10 = [];
        var tempDate = Date.UTC('2015', '1' ,'1');
        avg_5_10.forEach(function(e){
            var dateStrings = e[0].split('/');
            var tempDate = Date.UTC(dateStrings[0], dateStrings[1], dateStrings[2]);
            avg_5.push([tempDate, e[1]]);
            avg_10.push([tempDate, e[2]]);
        });
        avgOptions.series[0].name = 'test1';
        avgOptions.series[1].name = 'test2';
        avgOptions.series[0].data = avg_5;
        avgOptions.series[1].data = avg_10;
        var chart = new Highcharts.StockChart(avgOptions);
    </script>
{% endblock %}

